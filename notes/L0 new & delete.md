### new & delete

##### new:动态内存分配

```C++
int * pn;
pn=new int;//P=new T,T 是任意类型名，P是类型为T*的指针
```

动态分配出一片大小为sizeof(T)的内存空间，内存空间的起始地址是P。

```C++
int * pn;
int n;
pn=new int[n];//P=new T[N]此处N可以是整型表达式
```

起始地址赋给pn，相当于数组名

###### 关于char *与 char[]

1）若字符串常量出现在在表达式中，代表的值为该字符串常量的第一个字符的地址。

2）char* 是指向字符串首字母的指针，是变量，可以改变

char[] 是一个char型数组的名字，也是该数组首元素的地址，是常量，值不可以改变。

3)初始化

**char * a=”string1”;是实现了3个操作：**

**a.**声明一个char*变量(也就是声明了一个指向char的指针变量);
**b.**在内存中的文字常量区中开辟了一个空间存储字符串常量”string1”
**c.**返回这个区域的地址，作为值，赋给这个字符指针变量a

**最终的结果：**指针变量a指向了这一个字符串常量“string1”

更为严谨地：

```C++
const char * a="string1";
//const char * a表示指针类型为指向常字符的指针，指针可以变，可以指向其他常字符，但不能用指针来修改指向的字符
//char* const表示指向字符的静态指针，指针不可以变（不可以指向新的内容），指的字符内容可以变
```

（注意，如果这时候我们再执行：char * c=”string1”；则，c==a，实际上，只会执行上述步骤的1和3，因为这个常量已经在内存中创建）

**char b[]=”string2”;则是实现了2个操作：**

**a.**声明一个char 的数组，
**b.**为该数组“赋值”，即将”string2”的每一个字符分别赋值给数组的每一个元素
**最终的结果：**“数组的值”（注意不是b的值）等于”string2”，而不是b指向一个字符串常量,b是指针常量

原文链接：https://blog.csdn.net/ksws0292756/article/details/79432329

4）作为函数的形式参数，二者都表示指针变量，都可以修改。

##### Delete 释放内存

一个new-一个delete 不能多不能少

必须全部释放！

释放数组：delete[] p;