## 派生和继承

### 派生

B（派生类 子类）由A（基类 父类）派生出来，B拥有A的全部特点

可以扩充；修改

派生类经过定义后可以独立使用，不依赖基类

派生类拥有基类的所有成员变量和成员方法（成员函数）

派生类各个成员函数不能访问基类的private成员

#### 1.声明

```C++
class CUndergraduateStudent:public CStudent
{
}
//Cundergraduate是一个派生类，基类是CStudent，派生方式是public
//class 类名:派生方式说明符 基类名
```

#### 2.性质

##### （1）private成员变量

基类：private成员变量不能修改，并且将派生给其他派生类

例如：人的性别，名字

派生类：private成员变量是派生类特有的

例如：大学生类中的院系

##### （2）派生类内容

###### 覆盖

派生类可以通过重新写一个与基类一样的成员函数或者成员变量覆盖

但一般基类和派生类不定义同名成员变量

派生类内访问这类成员：

缺省的情况访问派生类定义的；访问由基类定义的同名成员要用::

###### 存储

派生类对象包含基类对象，基类对象的存储位置位于派生类对象新增的成员变量之前。

###### 访问

派生类访问基类的元素

派生类的对象.基类名::基类的public成员变量名

![image-20250305112709449](/Users/TJC/Library/Application Support/typora-user-images/image-20250305112709449.png)

![image-20250305112740833](/Users/TJC/Library/Application Support/typora-user-images/image-20250305112740833.png)

##### （3）复合vs继承

3.1复合也就是封闭类

3.2复合是“有”，继承是“是”

例如：圆里有“圆心“，圆心类被包含在圆类里，故是复合

例如：不同阶段学生的属性，学生类（包含名字、性别等基本信息）继承给大学生类（包含院系、导师等特殊信息）

3.3避免循环定义

```C++
class CDog;//先声明
class CMaster
{
	CDog* dogs[10];//不是作用对象，是一个指着他的指针
};
class CDog
{
	CMaster* m;//不是作用对象，是一个指着他的指针
};
```

#### 3.三种继承方式

公有继承；私有继承；保护继承

​		基类的public	基类的protected

公有继承	public		protected

私有继承	private		private

保护继承	protected	protected		

基类的private派生类都不可见

#### 4.构造函数与析构函数

派生类的构造函数需要先给基类初始化

需要先调用基类构造函数，有形参表给基类（显式）

如果省略基类构造函数，会自动调用基类默认构造函数（隐式）

也就是说，如果不写派生类的继承函数，会有自动调用基类的默认构造函数 ！！

析构函数：先调用派生类，再自动调用基类

**总体顺序**

基类构造-成员对象类构造-派生类对象构造

派生类析构-成员对象类析构-基类析构

#### 5.public继承的赋值兼容

派生类对象可以给基类对象赋值，也可以初始化基类引用

派生类对象的地址可以赋值给基类指针（前面一段地址一样）

此时基类指针不能访问派生类的种种函数

基类指针可以强制转换成派生类指针，但是必须保证指的是派生类对象

#### 6.直接基类与间接基类

直接：爸爸 儿子

间接：爷爷 孙子

首部只要列出直接基类（爸爸）

不用列出其他